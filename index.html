<!doctype html>
<html>
<head>
  <script src="svg.min.js"></script>
  <title>Asteroids</title>
</head>
<body>
  <div id="drawing"></div>
  <button onclick="ship.dy(-5)">Up</button>
  <button onclick="ship.dy(5)">Down</button>
  <script>
  var draw = SVG('drawing').size(1200,600)

  var rocks = []
  var num_rocks = 40
  var rock_size = 20
  var speed = 1000
  var alive = true
  for(var i = 0; i < num_rocks; i++){
    rocks.push(draw.circle(rock_size).fill('#aaaaaa'))
    rocks[i].move(Math.random() * 1200 + 200, Math.random() * 600)
  }

  var ship = draw.rect(40,20).fill('#aa00aa')
  ship.move(0,300)
  loop_forever()

  function loop_forever(){
    for(var i = 0; i < num_rocks; i++){
      rocks[i].dx(-1 * speed/ 1000)
      if(rocks[i].x() < 1) rocks[i].move(1200, Math.random() * 600)
      if(rocks[i].x() < 40 && rocks[i].y() > ship.y() -20 && rocks[i].y() < ship.y() + 20){
        alert("Score: " + speed + ". Reload page to try again.")
        alive = false
      }
    }
    speed++
    if(alive)setTimeout(loop_forever,20)
  }

  </script>
</body>
</html>
